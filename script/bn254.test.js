require("dotenv").config();

const fs = require('fs');
const { ethers } = require("hardhat");

const provider = new ethers.JsonRpcProvider("http://127.0.0.1:8545");

var signer = new ethers.Wallet(process.env.TEST_ACCOUNT_ONE_PRIVATE_KEY, provider);
var genesis_account = new ethers.Wallet(process.env.LOCAL_EXOCORE_VALIDATOR_SET_PRIVATE_KEY, provider);

var pubkeys = [];
var sigma;
var apkG2;
var msg;
var aggregatePubkeysPureData = "0x4ab299b8000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000641df851b0772c62842fef1e12295ee7b21a0bace91ec89de54e1b62e95751e4b424050d15c512cef5be8353cb4006e4e5c4f040cffcc6ef416e232df0be9d3fb32bf8d663223beb2cc5ee7ad6457e82ce2fd2edbfa6a6f63ecbe710acd9a8f73e02461de23d1970800746e03c77f85196a838a19ed394afb74f1213465e49758f2ab52179a0a61c91bfa8d7225fa4965ecf9971089271c080845d194fabad61612cb2a0ba00a739e73053dee072a67220541a94be794c978edf9f1f1e6615568c2a2820de5639744d2075d52397725f56ec9277008ba032fc8a8d699dc244ce2c040f2cc4b67644cba62c0a3eda56d7c7d0b5fe3d0f57234519328f3be9830154164256f35b8d0e56fdb68e353ad499c0de3378a2486e31b6582375525f1c9f801a936af26bc0bf247170aec8db9c87837ab7661af83f00dd5b75fe8c38beb74d21d3c9928511b542613327d5a957148c20abad70484d3e74b52b30f12cf39c9e1acc8abf993f700d7a79530473e0fb4ebf2c8bc74b484607e3a6d3d41c3464a725d22b8a33412633cba23e794e3b45a5bcc35466fd2b1bf3e6a41ee53c1c71452e8a41294a9e716c588cfdcff39482fae6126a6e2cc37892f2831dd8c0932b50022063194ae97535aae9d28cd9f1d2d6c971c607164ac9c47cf8e15e6663b9df22af7e52e836e4aa8baaf154fae434cf5a3f2bd62ebd332e9c9e48e906448046299d4328e8fec75bf918ea32092b60021c87cf0494b7b0b5c7fbc0771d331914159b404f976d4b30724fb35a9e5998adab980e22ec6acb8df736af5ce13f63cf082cff75579db0204b7dc23b5946e0bfd517440b276b2f21ddebdd45e5a2ebbf12017b86e1e767ea3b6b02b5d7f1e08622440b1a4c35d9503b45c86a03702b9f26ca425c76802fbc92be3954720e35f554061f81dcc0cbfef89f36e3a82b637d1fdb56b78d44c5f36b839708c716324d733404155a6d4464a88a45a7230663f614812d5ebfd9cc84b058e710ee32d2450f20d0264e34ac6df16c3fd22d99fa1d21330d178aaf16a3ad74c88f2e74d4fb1e8b6ed4b1277bbf37685e6d4179fa7a02628b9f51e99563ed0fcb94fb1f919744381ddab546bb68edbe229ba06c115917a5a56137a16c1224b15fb8940d2e30fed81a155f9dd4da75bde95f5a12b4e92a8787c98224c802609e5c27cbe0af371ec80bd7f64c6236ffc6fa1c5ac5925c0127cf2494f1a3bb100e4f3643a71da4635331acb78b32c45a7a2e50b6ffa8722f249c41cdb7776978a2a7027d0465bf58cebaab0f53f8aff61a49a5ad85045723b48db1def9a1b01922e0c450512d8e661852a8b944422ad71862e7872ae6bd1a35774ecdae76b36acb7171504e707a5df205a56deb9fa6ef3371eeb142aa012d74b73f3f8886a6242fbb78b9608306b53d12c60333cf2c4585d51bc02b56140958eba6dd7b5b6fbe761649f8c8105073468c5c7ef345c6956e276e2846899e13ced18511d74a239975e4fc03b61319f847a1148a66fbe816d8ac92436f4f6110602159f791388ab8ff2cd1461c86961b6df6f4519828dd4cc6f12ae51a2aea26e9280f0e37288156dc5a6bcb2240a70521ad044d64268362ab7031e9a407ec071fe873bfc0262a40b3a034881f7d1fc380c11c9925e46c7bfc2d0219e13f030e2ce179eb7a5f21e76424f9e45a3d91099a18acb46fb87b0a4ec97b53b6a27f095067e0e7bb9e0038923da09ffb6a833b4a61a2ece75d91cb7930a7ed2d0810143de16e7f3c5f002a1b73529393dd96165f8a0982d18796fac6ac03e6c3e7de0bdf06a1ac7bd82d706cfee76e95e73af5ea5b4b8b3549800e593a25386913730fc321b8c32a7396834910119b933c6803a7cefcb65fc0135c575e6b7b30e94b2d85fea98933d5b689255d3e8574ff62d65e1b07323037e88c3f6286363e734a245a4e0f41e34de8e138028eb8eb189ae7e92aaa75d5341c258595288b81319116d2a941ae2e75f9eb7ac78be2eb68254db65e343fe10c6731f04b46c82660fc1126d78506f6b2a99a5801f2745ac701116c29b0719124c7f0b96a008319f7100993a93e1cd1cb911375b368bd14a742c0d5473ee52c137a262871834725d85c217f6bac1d97900df9508bf53db82a24f408c31676edea850175c699b5dc0ab417423f2fd8e9c87b62709aa9425266d89723a2931366166f0f2f51edf60cec390542d3f288705d1598185858f4b5dac9aa9181dfc823e20490a58e6226b53b5c00bbe6277314a27d72dca69c8479572ff90122cd5d22cfcacd712387c8e439180b933b178d7d22c75c08e9ef74b88da9aca08a1dc2a59cddb2de77901307e4a61a03f99694a1cde5e500ab9f081693dd80c64c51d972f27e1b34038a0d44ad4003e648f99f81c99b13a01354cc6a728f5f03c110e8cace60b7bf1723ce258b3a1ba0e6139381efc546e22152621ce9d12469cd4444be58d0b6d2182497361bf91a31c487d33287d577bccd4703adbea6dcdac19669ba07af33837f409ebc44a524e906807e3ee733f5e06b8a15ef7a90e52a7c7d0063d80e37f31caf54ba83e621852a0f7a0d2b4089dae57552ece3ebb36a44b2603381664e577a61b3ea19aa2a93d7d74f7be4865e80f416c46310c85d59113d3425e5839fc9f7ed6f04dc66250bc4a0e45240721e654a14b2cb6b9a44489020032d5d0e0ecac06f9d8f21941b507fe7f0bdba9b1b2292f394d1e6429f1a02f286985313e4de95098c587a400054eb898204d9be569791e1c8a021293ac96575afc3d09b1577fbad50dbdeb512690276945d9e9601d6289bfce149481571c7d2df2e6c7f71d29f7dbe07681f193456cc00535124d1cbb543ccfa0554bddfe1cd31a22256231da24280dea7c52fe50162a0e0850a418fe0b66803bbde0c7602566aa6e22508644555c616da220c95f6a6a36a1876b072be0c539efc3ec9b492a7b199754f760367a14cc03f02162a97bc6a6b6001c8f7d24081562a731a069428c897291d3712f14a2611424303baee277ec92986e2bbbdc1d42c4b9dac4c35a00b99227f36276a67e6c32b6d1ed2c7c406b17a684affed3b00b51ec16f902b196a573893253e4b99f412efcd1ddca97d0ecccc976a111a651aad12bf216b627087e6ec9b5a0ca92b818d6bf10f059c50248a99ada5fed43453dcf1a1114826a776f07d6aa68451a4fad6f27a02aba6838ae2b2ff68c3ae218e4a01bb9391e40869677f4fe09087d44420ccd021f6c143c43dd62c8bc40d311ff147adb6e74d9abcd4eed7ba6a0fc4f180ed3129d15580c56e0410dfe2e6d8f8d2c01ffbb94157610545ca5dc9a0781939380e08e5ad4e6bf328f128345e06ab8ee63f1814c17628a2e5bcf41499a6346f926203a9441f2ec0a51a5b07d62824488a7d56964b6ccb676e9d93bfaa0cf34d04bf2e3fbd42497432b88d1868adca12c7a6dd39fef61003cdb4ed61fd87b5fbba9e153d33812d34ec55b08f0ecd4638cb3d222feb15950c7fc7e2fc156bd17278631f556a853d4056565a83751cf009d8099267148f860c6ffceb001bc0a50adb9b0a7bae3e250081a3c87776f73db5c2a10d86780db8b13ed0e8f11b3aae53d24d086dbedea766edfc82cc4ad5b3f2b142d1a72e20709db8dd757eda2a2326d50711cacb21d02c0e0b6c5d0569c4047ecf454c1fe1d318e77ee4de4daccb3bf4e407cc1ddee71ad2f20e33f6c61b53ccf72d13fa537237fae3e95e320e9daaf810163c1bfb6a530655ba0179694a3c7695833a90eb0383f3f73f5f0e06ad07599f10072562db9dd5f91444ddf4b497c0c6908fe8ae2be15c1c13d2ff19e919ba7a1f72782086c22f159e1673721c21ea4b2b053e205b25135e1d8ea7eac54da3df2d8e9e241ed89bb132b5fac8ecf1275d9b3eea61c0a44a7fcb3b057ecfe4989e2ae66783793cf860664c91af75e262c2e16867213b81f6c647a313626802e4cc0d6868093dac30e4663a581cff8d1b88c3b3a6cba7962b2c366b6167d36bbfc021115664d83e7fb1e9a362503eea3fddec62e119234473fc326ab4d2e9709c8820f0c64e30f2c33b482803671a8f03dd0c508b67ddd86e6c438883f2825e823c29bf9ab2818e6215b21278459c8de6c16c56f9cd925b8e33289fbf9b69361928019cd915019f366874c7ed1a757b5977a568bc8a0ffb937318e0eed0d602fd361dc0aee6dadfb5e7a0fa9f42ff57084762bd0b4d1f74454861db28d0c3136a8c24bc7068f721b10fddb8c6d9c581c2c3b6463e2bbab7a896743cd135cbf4f3711a197c05ded89597b7e2ba18a28de2ebd55312e6dc3ac178cb9928e669b8bc7e1e81bcd926deaec1e6e7f1d28d91855d86ff2120ba99f22f5bf23563d771ea7c07bfc58ae10c3bd23291e2315fe01192073d89c06ad3ac579dfcbbc2323fdf9e09f0d87713c480ad094895b5bc951a0a7c2c639356fff5e49b2eeb8c5b72a9e52b842ebf592dcaea71989c7995d7e1248e8b78f299baa99870b2ea6ee9864ccb152a65584451f21baa1d0e41d2264d47cb49b7f80a59ad8537aad6e2a7d3918d111468d1c52ecca204c40388ecd64b81f35421fcc656d7ed665198cbb3d10bda1450acbe9d00d2021761337e6f7e7521d60c82edf4bdd5004247d873f70b7b3e1f7cc79b787bc368747e7aca0eff695b0ebfc0d5bb549035fa519f1d4aaa08d418228657e4107565e83c020d53cb3ccb4d76fbe5c2e3218ff0fedbc4a9a9d75a1bcce58b8008c6dd63a5ddbb2da3d26a883807c99084fc723e1e4361370347242e4763e4d4301eb14b22e86d1d6798c944362a1787433421183bb51c53cffcc10b834a66ab0435dd8882b6e12f33aaf2df9c4d82220f22a7f15804f2d791e2bb21e18183532ca134af95a2a2e8b511b811e13a53c836b0513bf52e045b71620d27b2304b86be414941fa9bc53268827adc8cec8525af9b0bafe05b062274124e06854ba3c882ca33a3f491d84e95e3615a193ce0aa5fb9357aa02fba707f0cac2e2e619a57c6326baecb68f52055b3e2765288565f6d0510f34b324188a13ac315f95d40233e9596844b6e4fb6da1be6dd445620d1c8a6b6def116760195d8c22f03de9e0a16f07c2cdb997d583b4b7bfb1885db3cf7fea731430ddc1dfd66e513120977bc59635fa8858a4d7dcf7b6e68685edfb15a1f40d617c73581f233f109d504fc46a06d4286f571ea78a647a449b687484c06e1cd7caa3b3b1d3add252c66e923e6ab226956c930b79a3f8cbda0917f3058b400c1230a534807f741fe2b56d4506eb7fb7be4f067fd6f71435f9262282e2800b512c8295f492a39e98e18cca205d6de658fc2fb35b05ded5468d73993a831a64e3cf3f4fe5539d82d2505b6d7b654a404bd336d066184d17850e7f9d4d01fa966d35c53f7595c4cdb222a4ae6936348464492e8aad2abbd0c72195ac126a1ff68885ffaf4d3b8b807ff13a6ab27e232a315adabdcbf00757772e18fce0746604178e21ab156addcf338063d525ca768638a50088fc1811440756950bf732bee88f6fe970f538f3c936828d682900f0a6e9acbfc07949b3d364acdf536e1c3b9d3fe2d89fd1c2859fe26258edc4fe1cc0286f099bdfdcc4756a9fc97bd75fe1b448385d4418dd205fc5110bdd5e0e4d7a460f7c386c832eb16327e4b6254aba7df98d74fd5f42c8f703d25f0991b31f7d2cb28f02cd8966d24e90162d6ff8453054b747e3e60da39fa5f2c37c05f52720a5ebbf972fd0516d90c43f68a63dc4783bcc6ef0df868faaadf011121771f5bae6b623bddf296f216f594a1be64ed8fee28ea1dfb8d1200849301df356e125dfd701269a71434062d3e6f0dbe074e23c45867466c0a6d14692625f490a3bc0dc8ee798024185f701de00be073eb2d34c96e7708cbc5d5fabefc0d42a4260342004b7c1a1a200cac59764bb3fd99852d976b0eb9f6ff805492ed2e129d41fb7eb9cfa404504b12f7f7bd7559c8cb537159f722f300ea99c5ee91110c26f56c0ac17605a67dde01315f55141d5e3a0eb9495896e257dc2d290fe530641b7945c412beccb6d5d60e10cf765f40f47b3ac4c7194c0a9da9f88d74a212d33fb9d2c5120886776e38a14a2f541c4bcb09d65f8c6f6f5f808b57bb6eb82fb36b9ef711e0a82a2fafa21352a1d5424be3daa4a8a1169219ecccb1ce397c26ecfacf6751e82b9b8f340613d83e297b54191d203f452fda693dd31944e02a2332873c46fa9c4c79990c68666efbce96020525d218f3d070c19c3801d676022703cf3a36e449e3a1ec926ae7eeed9ceb9d8975921d91b0e0fa3d87782bcebb2019a00401d87c69d468415f7aeedd8201051869ddfd84101434607aaa07f31f07a97637fb766c8e986e4365339afd1e1629317f7a84b2fff743b4a628a78d790dfb262c6babe231d73e6bea01f66028f3fdd2400b6f1ccc11745566b8756be323239500b0f5430248995f13caf0c39146f921457b23dbee16bd1fef33d530ea2fb18543a1f0c050fd44259fcfcbe26b293ae12561f48df962223ba6e42e556a22871bed4c38679514bfc844b6361fe28103c3628e8388bd969872b37e52022121e3197c815d61ce07f27a0329182230e61849027ecc3173866d5df220667d3a008de208b45320946e9cebfc45e8942adcddd3378d0eeedcc97c8f34810a3a791be5ecadc42358f3ea534a7b9df85d0d2cf2cbfa09061364eb4050131a85d54b1ae373d4e763d87f87c3b73238a6d4710ac4c562d727f9aa4c8f419c8d34f31c1b01bfd1f21827f4f4dd691b3a9f5b52c381a537b1be1d4a8fe4de7a6bd291e800ac63482cdef1c339feb902150cd694b0297d2e856f4f3feae19357d438252327792ce30e13d80ff65ba17e9b997b272c65d45dc4e271a9f3b4b7039852491a14c2785cd3b6ab7ee795daab8020f85184cad37e620d5f811d183b9fb885f7e4198ca21171e4a33848c36f960e06a65ef80ab5b97e95db7b7d6340f895c325df28df91ab998d4a2058f25155b9927cb779c4c45a348de18398f8aaa7e0de0bc3003087298db04a6ce7b1f8ed7bc4a083755de752c6dc656a696a9ed771dae44b1438654fb0f82953544b5451edcbf9cae7adb205b1331240dc9eef7204f9c01d2ad1d9e3479ed41903a3518ebd00bd67949e12046cba0fe60df33165ddfdc26f00406055d5754e4af7440f05313234d98d4368cab2eade8aece8e926b237c35115c110eedee088ac4df48905bac73d666ca8f9d3206ca7a89853f9edf54ba3380105a80e5cf83c6eceaa22c16cf333c92a2a957a6a06447d034a159f69e282550f74eb5999a437b2a8a389b18b3fbb87f33c813b5fde07cbfbc02e2226235cb40c5434d00bd89d44f0eb58045b9529dc18d3833929ec7d0faf25d6e223173ed104d04d17b18c274cb0ea79f39ba4cfb128374112a313bceeb4e90162240e9f900abc48fde0f80c50d352856ea20149e1587048118f7704c94c467e257d1bb9431b3234055071fe779048092fc3f8e984f0283223bbfeb745474787f390cfd9912ca5644db2debe069b871bf470f6be7fbf5db7694ae226d01b25c88b93131eec2d50226596c3e0cee3d26cea8427f70061ecde2a71da5eda6bd36c1a8dd2668b2017d0c203da14938cbe524a2f5cdd2ccfd44224326718a5e4ef7eb9e8345eae21540e0daf0ad2c7254fff5aa888a9f76e70b469be16ae37f3efeb075366af33040c14e3f9fe75b58c7ad1542fd579443d4ae2e20a78a3b3ff785dc8ca6d13581c2efcede2d6e4e6d39645b777669e9b940efd136dc53246d6c06b3f758ab8b52a1edfe36263009c81d6494e1daaf5297afb3c2e97d03239cb109bd487594fbe26625381b0dd257bc8b311d1825618d10036df12de51399b0f4afaa9ef350eeb23bae883c65483da281c08a5ee6dd2185cca4cfe4ab804fa9a6eecd280ab56ba096a4f6ffa0d3dee485471234e42da361f9ed5ca2d1c22746c5eb1a4d34b7a3c2da83b1062a562949ce486897a943b5128296c461698b8c135f7d15160b6fcb108fcf4970ad31dddd8d172f83ca0ef35c19db7ed0f756f71c9616e7a2ba2dfc40abfaaa3449ad9770d4d34627de913c4160e49ddf7a1b33b863d3ffbf47bb61a055618818a8877ef3eeebd7043725ae5c32e0a598b24ec3c7e2a3ecdc11b98ad178edcb0303d78c05469b8227984fd15cf402998f0bb27e64ee0f3c8ab6e4d5e28da0b42fb5cd37273237d7607dac71f1a9ea7fe03c9d4f4138f18e9bbc3cf64245f866a355bac415bf6dbafb47b98f5095152f441da271570589ee2322d8ea5292d390ef0d85c5f1af55ce5cc6a72750a16f5ea6a38839dd17d03727416568b0abef3640b3b9b1be791770fd4d521e2ff0399d390585cb274ab1a5cfb9dcf372f068fe6ddc3560be8ba4fa334c54c9963b16ec655491cd5438233f59f6038a80912135b6a0c7d096577cd1b2c1997fbfd7bfbd311a1fd89818330cbe3f93adb05eefeb445ed75ccfd3aaffbaa570fc5095006c35922cd4968d0e3196df8c3171bae5dad06dc8e063e69f5ec0f369418751c8693442f59892713e9cb36d93b020db11f71807ad4bb2f581f02176d5e75796cf85285bfd1f2b70c541b1594514717ae9a7362ceca4c3e5c2f265ceecf13991d9339f20ca9b3e09cfe158cc8a61d15d3bce6d41da479513157337e8b495f0637696f7904b7189108b9f855cfa6b71cadd05b1fb349412f7ff6b45447a601790144860855f5aa6e42500535ee23362cd5de3dfb5c5e14da3ffdda30ec31306b45595bcc677f8e39a59bc8d8a372b8184ea22192f30b55463efb98a330cf967e3bfeb60ec00ccc88065b781c88721d0248d4b06bbce535b6fb182fccb1208a2dfcd816a330425de2ac4b6edba2fac721fc078ecd4bc6e110f69c3d980411edb9b286587772f707db37b7918d3db35624f62a55568005352c7c86baa31f3c18d2f3e0bbd42ca7213464d97d151d19a1020550d958e15c067d7cea27d097ed05b8c502f31c6e42ac81b0bc0148eedada"

var fastAggregateVerifyPureData = "0xbeae5a6c47173285a8d7341e5e972fc677286384f802f8ef42a5ec5f03bbfa254cb01fad00000000000000000000000000000000000000000000000000000000000001000bcb2b68b6c68a5aea7fe75b5446c4ca410461fa226c2487d07eb2c504639cb52a3b3f7ef4f62985af31809fdc531483e5f1cd67aa1bcf0f8ac0d17e158aa9670940e64478db51fe630cc540dbeabea34d072a54fd7c743056e18174f9a1b64e00c874e4fcfb88d5c98a0240bc6f7f37d45f2226ca147317b3a2b7243ddb6c1b06d7fe4c6135c73e7257104f96087496aac2be82a6de6afd663367e3df1ecb66071e248a0cdee28d92b7a05263d6b5d6d410d99ccd93da993221cd3b59a4716f00000000000000000000000000000000000000000000000000000000000000641df851b0772c62842fef1e12295ee7b21a0bace91ec89de54e1b62e95751e4b424050d15c512cef5be8353cb4006e4e5c4f040cffcc6ef416e232df0be9d3fb32bf8d663223beb2cc5ee7ad6457e82ce2fd2edbfa6a6f63ecbe710acd9a8f73e02461de23d1970800746e03c77f85196a838a19ed394afb74f1213465e49758f2ab52179a0a61c91bfa8d7225fa4965ecf9971089271c080845d194fabad61612cb2a0ba00a739e73053dee072a67220541a94be794c978edf9f1f1e6615568c2a2820de5639744d2075d52397725f56ec9277008ba032fc8a8d699dc244ce2c040f2cc4b67644cba62c0a3eda56d7c7d0b5fe3d0f57234519328f3be9830154164256f35b8d0e56fdb68e353ad499c0de3378a2486e31b6582375525f1c9f801a936af26bc0bf247170aec8db9c87837ab7661af83f00dd5b75fe8c38beb74d21d3c9928511b542613327d5a957148c20abad70484d3e74b52b30f12cf39c9e1acc8abf993f700d7a79530473e0fb4ebf2c8bc74b484607e3a6d3d41c3464a725d22b8a33412633cba23e794e3b45a5bcc35466fd2b1bf3e6a41ee53c1c71452e8a41294a9e716c588cfdcff39482fae6126a6e2cc37892f2831dd8c0932b50022063194ae97535aae9d28cd9f1d2d6c971c607164ac9c47cf8e15e6663b9df22af7e52e836e4aa8baaf154fae434cf5a3f2bd62ebd332e9c9e48e906448046299d4328e8fec75bf918ea32092b60021c87cf0494b7b0b5c7fbc0771d331914159b404f976d4b30724fb35a9e5998adab980e22ec6acb8df736af5ce13f63cf082cff75579db0204b7dc23b5946e0bfd517440b276b2f21ddebdd45e5a2ebbf12017b86e1e767ea3b6b02b5d7f1e08622440b1a4c35d9503b45c86a03702b9f26ca425c76802fbc92be3954720e35f554061f81dcc0cbfef89f36e3a82b637d1fdb56b78d44c5f36b839708c716324d733404155a6d4464a88a45a7230663f614812d5ebfd9cc84b058e710ee32d2450f20d0264e34ac6df16c3fd22d99fa1d21330d178aaf16a3ad74c88f2e74d4fb1e8b6ed4b1277bbf37685e6d4179fa7a02628b9f51e99563ed0fcb94fb1f919744381ddab546bb68edbe229ba06c115917a5a56137a16c1224b15fb8940d2e30fed81a155f9dd4da75bde95f5a12b4e92a8787c98224c802609e5c27cbe0af371ec80bd7f64c6236ffc6fa1c5ac5925c0127cf2494f1a3bb100e4f3643a71da4635331acb78b32c45a7a2e50b6ffa8722f249c41cdb7776978a2a7027d0465bf58cebaab0f53f8aff61a49a5ad85045723b48db1def9a1b01922e0c450512d8e661852a8b944422ad71862e7872ae6bd1a35774ecdae76b36acb7171504e707a5df205a56deb9fa6ef3371eeb142aa012d74b73f3f8886a6242fbb78b9608306b53d12c60333cf2c4585d51bc02b56140958eba6dd7b5b6fbe761649f8c8105073468c5c7ef345c6956e276e2846899e13ced18511d74a239975e4fc03b61319f847a1148a66fbe816d8ac92436f4f6110602159f791388ab8ff2cd1461c86961b6df6f4519828dd4cc6f12ae51a2aea26e9280f0e37288156dc5a6bcb2240a70521ad044d64268362ab7031e9a407ec071fe873bfc0262a40b3a034881f7d1fc380c11c9925e46c7bfc2d0219e13f030e2ce179eb7a5f21e76424f9e45a3d91099a18acb46fb87b0a4ec97b53b6a27f095067e0e7bb9e0038923da09ffb6a833b4a61a2ece75d91cb7930a7ed2d0810143de16e7f3c5f002a1b73529393dd96165f8a0982d18796fac6ac03e6c3e7de0bdf06a1ac7bd82d706cfee76e95e73af5ea5b4b8b3549800e593a25386913730fc321b8c32a7396834910119b933c6803a7cefcb65fc0135c575e6b7b30e94b2d85fea98933d5b689255d3e8574ff62d65e1b07323037e88c3f6286363e734a245a4e0f41e34de8e138028eb8eb189ae7e92aaa75d5341c258595288b81319116d2a941ae2e75f9eb7ac78be2eb68254db65e343fe10c6731f04b46c82660fc1126d78506f6b2a99a5801f2745ac701116c29b0719124c7f0b96a008319f7100993a93e1cd1cb911375b368bd14a742c0d5473ee52c137a262871834725d85c217f6bac1d97900df9508bf53db82a24f408c31676edea850175c699b5dc0ab417423f2fd8e9c87b62709aa9425266d89723a2931366166f0f2f51edf60cec390542d3f288705d1598185858f4b5dac9aa9181dfc823e20490a58e6226b53b5c00bbe6277314a27d72dca69c8479572ff90122cd5d22cfcacd712387c8e439180b933b178d7d22c75c08e9ef74b88da9aca08a1dc2a59cddb2de77901307e4a61a03f99694a1cde5e500ab9f081693dd80c64c51d972f27e1b34038a0d44ad4003e648f99f81c99b13a01354cc6a728f5f03c110e8cace60b7bf1723ce258b3a1ba0e6139381efc546e22152621ce9d12469cd4444be58d0b6d2182497361bf91a31c487d33287d577bccd4703adbea6dcdac19669ba07af33837f409ebc44a524e906807e3ee733f5e06b8a15ef7a90e52a7c7d0063d80e37f31caf54ba83e621852a0f7a0d2b4089dae57552ece3ebb36a44b2603381664e577a61b3ea19aa2a93d7d74f7be4865e80f416c46310c85d59113d3425e5839fc9f7ed6f04dc66250bc4a0e45240721e654a14b2cb6b9a44489020032d5d0e0ecac06f9d8f21941b507fe7f0bdba9b1b2292f394d1e6429f1a02f286985313e4de95098c587a400054eb898204d9be569791e1c8a021293ac96575afc3d09b1577fbad50dbdeb512690276945d9e9601d6289bfce149481571c7d2df2e6c7f71d29f7dbe07681f193456cc00535124d1cbb543ccfa0554bddfe1cd31a22256231da24280dea7c52fe50162a0e0850a418fe0b66803bbde0c7602566aa6e22508644555c616da220c95f6a6a36a1876b072be0c539efc3ec9b492a7b199754f760367a14cc03f02162a97bc6a6b6001c8f7d24081562a731a069428c897291d3712f14a2611424303baee277ec92986e2bbbdc1d42c4b9dac4c35a00b99227f36276a67e6c32b6d1ed2c7c406b17a684affed3b00b51ec16f902b196a573893253e4b99f412efcd1ddca97d0ecccc976a111a651aad12bf216b627087e6ec9b5a0ca92b818d6bf10f059c50248a99ada5fed43453dcf1a1114826a776f07d6aa68451a4fad6f27a02aba6838ae2b2ff68c3ae218e4a01bb9391e40869677f4fe09087d44420ccd021f6c143c43dd62c8bc40d311ff147adb6e74d9abcd4eed7ba6a0fc4f180ed3129d15580c56e0410dfe2e6d8f8d2c01ffbb94157610545ca5dc9a0781939380e08e5ad4e6bf328f128345e06ab8ee63f1814c17628a2e5bcf41499a6346f926203a9441f2ec0a51a5b07d62824488a7d56964b6ccb676e9d93bfaa0cf34d04bf2e3fbd42497432b88d1868adca12c7a6dd39fef61003cdb4ed61fd87b5fbba9e153d33812d34ec55b08f0ecd4638cb3d222feb15950c7fc7e2fc156bd17278631f556a853d4056565a83751cf009d8099267148f860c6ffceb001bc0a50adb9b0a7bae3e250081a3c87776f73db5c2a10d86780db8b13ed0e8f11b3aae53d24d086dbedea766edfc82cc4ad5b3f2b142d1a72e20709db8dd757eda2a2326d50711cacb21d02c0e0b6c5d0569c4047ecf454c1fe1d318e77ee4de4daccb3bf4e407cc1ddee71ad2f20e33f6c61b53ccf72d13fa537237fae3e95e320e9daaf810163c1bfb6a530655ba0179694a3c7695833a90eb0383f3f73f5f0e06ad07599f10072562db9dd5f91444ddf4b497c0c6908fe8ae2be15c1c13d2ff19e919ba7a1f72782086c22f159e1673721c21ea4b2b053e205b25135e1d8ea7eac54da3df2d8e9e241ed89bb132b5fac8ecf1275d9b3eea61c0a44a7fcb3b057ecfe4989e2ae66783793cf860664c91af75e262c2e16867213b81f6c647a313626802e4cc0d6868093dac30e4663a581cff8d1b88c3b3a6cba7962b2c366b6167d36bbfc021115664d83e7fb1e9a362503eea3fddec62e119234473fc326ab4d2e9709c8820f0c64e30f2c33b482803671a8f03dd0c508b67ddd86e6c438883f2825e823c29bf9ab2818e6215b21278459c8de6c16c56f9cd925b8e33289fbf9b69361928019cd915019f366874c7ed1a757b5977a568bc8a0ffb937318e0eed0d602fd361dc0aee6dadfb5e7a0fa9f42ff57084762bd0b4d1f74454861db28d0c3136a8c24bc7068f721b10fddb8c6d9c581c2c3b6463e2bbab7a896743cd135cbf4f3711a197c05ded89597b7e2ba18a28de2ebd55312e6dc3ac178cb9928e669b8bc7e1e81bcd926deaec1e6e7f1d28d91855d86ff2120ba99f22f5bf23563d771ea7c07bfc58ae10c3bd23291e2315fe01192073d89c06ad3ac579dfcbbc2323fdf9e09f0d87713c480ad094895b5bc951a0a7c2c639356fff5e49b2eeb8c5b72a9e52b842ebf592dcaea71989c7995d7e1248e8b78f299baa99870b2ea6ee9864ccb152a65584451f21baa1d0e41d2264d47cb49b7f80a59ad8537aad6e2a7d3918d111468d1c52ecca204c40388ecd64b81f35421fcc656d7ed665198cbb3d10bda1450acbe9d00d2021761337e6f7e7521d60c82edf4bdd5004247d873f70b7b3e1f7cc79b787bc368747e7aca0eff695b0ebfc0d5bb549035fa519f1d4aaa08d418228657e4107565e83c020d53cb3ccb4d76fbe5c2e3218ff0fedbc4a9a9d75a1bcce58b8008c6dd63a5ddbb2da3d26a883807c99084fc723e1e4361370347242e4763e4d4301eb14b22e86d1d6798c944362a1787433421183bb51c53cffcc10b834a66ab0435dd8882b6e12f33aaf2df9c4d82220f22a7f15804f2d791e2bb21e18183532ca134af95a2a2e8b511b811e13a53c836b0513bf52e045b71620d27b2304b86be414941fa9bc53268827adc8cec8525af9b0bafe05b062274124e06854ba3c882ca33a3f491d84e95e3615a193ce0aa5fb9357aa02fba707f0cac2e2e619a57c6326baecb68f52055b3e2765288565f6d0510f34b324188a13ac315f95d40233e9596844b6e4fb6da1be6dd445620d1c8a6b6def116760195d8c22f03de9e0a16f07c2cdb997d583b4b7bfb1885db3cf7fea731430ddc1dfd66e513120977bc59635fa8858a4d7dcf7b6e68685edfb15a1f40d617c73581f233f109d504fc46a06d4286f571ea78a647a449b687484c06e1cd7caa3b3b1d3add252c66e923e6ab226956c930b79a3f8cbda0917f3058b400c1230a534807f741fe2b56d4506eb7fb7be4f067fd6f71435f9262282e2800b512c8295f492a39e98e18cca205d6de658fc2fb35b05ded5468d73993a831a64e3cf3f4fe5539d82d2505b6d7b654a404bd336d066184d17850e7f9d4d01fa966d35c53f7595c4cdb222a4ae6936348464492e8aad2abbd0c72195ac126a1ff68885ffaf4d3b8b807ff13a6ab27e232a315adabdcbf00757772e18fce0746604178e21ab156addcf338063d525ca768638a50088fc1811440756950bf732bee88f6fe970f538f3c936828d682900f0a6e9acbfc07949b3d364acdf536e1c3b9d3fe2d89fd1c2859fe26258edc4fe1cc0286f099bdfdcc4756a9fc97bd75fe1b448385d4418dd205fc5110bdd5e0e4d7a460f7c386c832eb16327e4b6254aba7df98d74fd5f42c8f703d25f0991b31f7d2cb28f02cd8966d24e90162d6ff8453054b747e3e60da39fa5f2c37c05f52720a5ebbf972fd0516d90c43f68a63dc4783bcc6ef0df868faaadf011121771f5bae6b623bddf296f216f594a1be64ed8fee28ea1dfb8d1200849301df356e125dfd701269a71434062d3e6f0dbe074e23c45867466c0a6d14692625f490a3bc0dc8ee798024185f701de00be073eb2d34c96e7708cbc5d5fabefc0d42a4260342004b7c1a1a200cac59764bb3fd99852d976b0eb9f6ff805492ed2e129d41fb7eb9cfa404504b12f7f7bd7559c8cb537159f722f300ea99c5ee91110c26f56c0ac17605a67dde01315f55141d5e3a0eb9495896e257dc2d290fe530641b7945c412beccb6d5d60e10cf765f40f47b3ac4c7194c0a9da9f88d74a212d33fb9d2c5120886776e38a14a2f541c4bcb09d65f8c6f6f5f808b57bb6eb82fb36b9ef711e0a82a2fafa21352a1d5424be3daa4a8a1169219ecccb1ce397c26ecfacf6751e82b9b8f340613d83e297b54191d203f452fda693dd31944e02a2332873c46fa9c4c79990c68666efbce96020525d218f3d070c19c3801d676022703cf3a36e449e3a1ec926ae7eeed9ceb9d8975921d91b0e0fa3d87782bcebb2019a00401d87c69d468415f7aeedd8201051869ddfd84101434607aaa07f31f07a97637fb766c8e986e4365339afd1e1629317f7a84b2fff743b4a628a78d790dfb262c6babe231d73e6bea01f66028f3fdd2400b6f1ccc11745566b8756be323239500b0f5430248995f13caf0c39146f921457b23dbee16bd1fef33d530ea2fb18543a1f0c050fd44259fcfcbe26b293ae12561f48df962223ba6e42e556a22871bed4c38679514bfc844b6361fe28103c3628e8388bd969872b37e52022121e3197c815d61ce07f27a0329182230e61849027ecc3173866d5df220667d3a008de208b45320946e9cebfc45e8942adcddd3378d0eeedcc97c8f34810a3a791be5ecadc42358f3ea534a7b9df85d0d2cf2cbfa09061364eb4050131a85d54b1ae373d4e763d87f87c3b73238a6d4710ac4c562d727f9aa4c8f419c8d34f31c1b01bfd1f21827f4f4dd691b3a9f5b52c381a537b1be1d4a8fe4de7a6bd291e800ac63482cdef1c339feb902150cd694b0297d2e856f4f3feae19357d438252327792ce30e13d80ff65ba17e9b997b272c65d45dc4e271a9f3b4b7039852491a14c2785cd3b6ab7ee795daab8020f85184cad37e620d5f811d183b9fb885f7e4198ca21171e4a33848c36f960e06a65ef80ab5b97e95db7b7d6340f895c325df28df91ab998d4a2058f25155b9927cb779c4c45a348de18398f8aaa7e0de0bc3003087298db04a6ce7b1f8ed7bc4a083755de752c6dc656a696a9ed771dae44b1438654fb0f82953544b5451edcbf9cae7adb205b1331240dc9eef7204f9c01d2ad1d9e3479ed41903a3518ebd00bd67949e12046cba0fe60df33165ddfdc26f00406055d5754e4af7440f05313234d98d4368cab2eade8aece8e926b237c35115c110eedee088ac4df48905bac73d666ca8f9d3206ca7a89853f9edf54ba3380105a80e5cf83c6eceaa22c16cf333c92a2a957a6a06447d034a159f69e282550f74eb5999a437b2a8a389b18b3fbb87f33c813b5fde07cbfbc02e2226235cb40c5434d00bd89d44f0eb58045b9529dc18d3833929ec7d0faf25d6e223173ed104d04d17b18c274cb0ea79f39ba4cfb128374112a313bceeb4e90162240e9f900abc48fde0f80c50d352856ea20149e1587048118f7704c94c467e257d1bb9431b3234055071fe779048092fc3f8e984f0283223bbfeb745474787f390cfd9912ca5644db2debe069b871bf470f6be7fbf5db7694ae226d01b25c88b93131eec2d50226596c3e0cee3d26cea8427f70061ecde2a71da5eda6bd36c1a8dd2668b2017d0c203da14938cbe524a2f5cdd2ccfd44224326718a5e4ef7eb9e8345eae21540e0daf0ad2c7254fff5aa888a9f76e70b469be16ae37f3efeb075366af33040c14e3f9fe75b58c7ad1542fd579443d4ae2e20a78a3b3ff785dc8ca6d13581c2efcede2d6e4e6d39645b777669e9b940efd136dc53246d6c06b3f758ab8b52a1edfe36263009c81d6494e1daaf5297afb3c2e97d03239cb109bd487594fbe26625381b0dd257bc8b311d1825618d10036df12de51399b0f4afaa9ef350eeb23bae883c65483da281c08a5ee6dd2185cca4cfe4ab804fa9a6eecd280ab56ba096a4f6ffa0d3dee485471234e42da361f9ed5ca2d1c22746c5eb1a4d34b7a3c2da83b1062a562949ce486897a943b5128296c461698b8c135f7d15160b6fcb108fcf4970ad31dddd8d172f83ca0ef35c19db7ed0f756f71c9616e7a2ba2dfc40abfaaa3449ad9770d4d34627de913c4160e49ddf7a1b33b863d3ffbf47bb61a055618818a8877ef3eeebd7043725ae5c32e0a598b24ec3c7e2a3ecdc11b98ad178edcb0303d78c05469b8227984fd15cf402998f0bb27e64ee0f3c8ab6e4d5e28da0b42fb5cd37273237d7607dac71f1a9ea7fe03c9d4f4138f18e9bbc3cf64245f866a355bac415bf6dbafb47b98f5095152f441da271570589ee2322d8ea5292d390ef0d85c5f1af55ce5cc6a72750a16f5ea6a38839dd17d03727416568b0abef3640b3b9b1be791770fd4d521e2ff0399d390585cb274ab1a5cfb9dcf372f068fe6ddc3560be8ba4fa334c54c9963b16ec655491cd5438233f59f6038a80912135b6a0c7d096577cd1b2c1997fbfd7bfbd311a1fd89818330cbe3f93adb05eefeb445ed75ccfd3aaffbaa570fc5095006c35922cd4968d0e3196df8c3171bae5dad06dc8e063e69f5ec0f369418751c8693442f59892713e9cb36d93b020db11f71807ad4bb2f581f02176d5e75796cf85285bfd1f2b70c541b1594514717ae9a7362ceca4c3e5c2f265ceecf13991d9339f20ca9b3e09cfe158cc8a61d15d3bce6d41da479513157337e8b495f0637696f7904b7189108b9f855cfa6b71cadd05b1fb349412f7ff6b45447a601790144860855f5aa6e42500535ee23362cd5de3dfb5c5e14da3ffdda30ec31306b45595bcc677f8e39a59bc8d8a372b8184ea22192f30b55463efb98a330cf967e3bfeb60ec00ccc88065b781c88721d0248d4b06bbce535b6fb182fccb1208a2dfcd816a330425de2ac4b6edba2fac721fc078ecd4bc6e110f69c3d980411edb9b286587772f707db37b7918d3db35624f62a55568005352c7c86baa31f3c18d2f3e0bbd42ca7213464d97d151d19a1020550d958e15c067d7cea27d097ed05b8c502f31c6e42ac81b0bc0148eedada"

async function readKeysFromFile() {
  try {
    // Read the JSON file
    const jsonFile = fs.readFileSync('script/bn254Pubkeys.json', 'utf-8');

    // Parse JSON data
    const jsonData = JSON.parse(jsonFile);

    apkG2 = {
        X: [
            BigInt(jsonData.apkG2[0]), 
            BigInt(jsonData.apkG2[1])
        ], 
        Y: [
            BigInt(jsonData.apkG2[2]), 
            BigInt(jsonData.apkG2[3])
        ]
    };

    msg = Buffer.from(jsonData.msg, 'hex');

    sigma = {
        X: BigInt(jsonData.sigma[0]), 
        Y: BigInt(jsonData.sigma[1])
    }

    // Iterate over key pairs
    for (const key in jsonData.pubkeys) {
      var pubkey = {
        X: BigInt(jsonData.pubkeys[key][0]), 
        Y: BigInt(jsonData.pubkeys[key][1])
    };

      pubkeys.push(pubkey);

    }
  } catch (error) {
    console.error('Error reading keys from file:', error);
  }
}

(async () => {
    await readKeysFromFile();

    var balance = await provider.getBalance(process.env.TEST_ACCOUNT_ONE_ADDRESS);
    if (balance < 1e18) {
        var transfer_tx = await genesis_account.sendTransaction({
            to: process.env.TEST_ACCOUNT_ONE_ADDRESS,
            value: ethers.parseEther('100.0'),
            data: "0x"
        });
        await new Promise(resolve => setTimeout(resolve, 5000));
        console.log("test account one balance:", ethers.formatEther(balance));
    }

    const bn254CallerTemplate = await ethers.getContractFactory("BN254Caller");
    const bn254Caller = await bn254CallerTemplate.connect(signer).deploy();
    await bn254Caller.waitForDeployment();
    console.log("BN254 caller contract address", bn254Caller.target);
    
    for (let i = 0; i < 10; i++) {
        var apk = await provider.call({
            to: bn254Caller.target,
            data: aggregatePubkeysPureData
        })
        console.log("apk:", apk);

        var valid = await provider.call({
            to: bn254Caller.target,
            data: fastAggregateVerifyPureData
        })
        console.log("valid:", valid);
    }
})();

